<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table{
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        label{display:inline-block;width:200px;}
        #l1{
            background-color: black;
            color: white;
        }
    </style>
</head>
<body>
    <form id="Form">
        <h1>Formulaire d'inscription</h1>
        <div style="display: flex;">
            <label>Nom complet :</label>
            <p id="nomError"></p>
        </div>
        <input type="text" id="nom" onblur="f1()"required><br><br>
        <div style="display: flex;">
            <label>Email :</label>
            <p id="emailError"></p>
        </div>
        <input type="email" id="email" onblur="f2()" required><br><br>
        
        <div style="display: flex;">
            <label>Nom de matiere:</label>
            <p id="MError"></p>
        </div>
        <input type="text" id="matiere" onblur="f3()" required><br><br>
        
        <div style="display: flex;">
            <label>Note du controle 1:</label>
            <p id="nb1Error"></p>
        </div>
        <input type="number" id="n1" onblur="f4()" required><br><br>
        
        <div style="display: flex;">
            <label>Note du controle 2:</label>
            <p id="nb2Error"></p>
        </div>
        <input type="number" id="n2" onblur="f5()" required><br><br>
        
        <div style="display: flex;">
            <label>Coefficient de la matiere:</label>
            <p id="Coef"></p>
        </div>
        <input type="number" id="coefficient" onblur="f6()"  required><br><br>
        
        <!-- <input type="submit" onclick="ajoute()" name="" id=""> -->
    </form>
    <button onclick="ajoute()" type="submit">Ajouter une ligne</button><br><br>
    <h2>Liste des etudiants</h2>
    <table id="matable">
        <tr id="l1">
            <th>Nom complet</th>
            <th>Email</th>
            <th>Nom de la matiere</th>
            <th>Note controle 1</th>
            <th>Note controle 2</th>
            <th>Coefficient</th>
            <th>Moyenne</th>

        </tr>
        <!-- <tr>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>1</td>
        </tr> -->
    </table>
    <script>
        function f1(){
            input=document.getElementById("nom")
            var nom =document.getElementById("nom").value;
            var nomPattern = /^[A-Z][a-z]*(\s+[A-Z][a-z]*)+$/;
            if (!nomPattern.test(nom)) {
            input.style.borderColor = "red"
            document.getElementById('nomError').innerText = 'Le nom complet doit contenir au moins deux mots,chaque mot commençant par une lettre majuscule !';
            document.getElementById('nomError').style.color="red"
            }else {
            input.style.borderColor = "green"
            document.getElementById('nomError').innerText="✓";
            document.getElementById('nomError').style.color="green"
        }
    }
        function f2(){
            input=document.getElementById("email")
            var email = document.getElementById('email').value;
            var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
            if (!emailPattern.test(email)) {
                input.style.borderColor = "red"
            document.getElementById('emailError').innerText = 'Veuillez entrer un email valide.';
            document.getElementById('emailError').style.color="red"
            }else {
                input.style.borderColor = "green"
            document.getElementById('emailError').innerText="✓";
            document.getElementById('emailError').style.color="green"
            }
    }
        function f3(){
            input=document.getElementById("matiere")
            var matiere = document.getElementById("matiere").value;
            var matierePattern = /^[A-Za-z]+$/;
            if (!matierePattern.test(matiere)) {
                input.style.borderColor = "red"
               document.getElementById('MError').innerText = 'Veuillez entrer nom valide.';
               document.getElementById('MError').style.color="red"
            }else {
                input.style.borderColor = "green"
               document.getElementById('MError').innerText="✓";
               document.getElementById('MError').style.color="green";
            }
    }
        function f4(){
            input=document.getElementById("n1")
            var nb1 = document.getElementById("n1").value;
            if (nb1>=0 && nb1 <=20){
                input.style.borderColor = "green"
                document.getElementById('nb1Error').innerText = '✓';
                document.getElementById('nb1Error').style.color="green"
            } else{
                input.style.borderColor = "red"
                document.getElementById('nb1Error').innerText = 'Veuillez entrer un nombre  compris entre 0 et 20.';
                document.getElementById('nb1Error').style.color="red"
            }
    }
        function f5(){
            input=document.getElementById("n2")
            var nb1 = document.getElementById("n2").value;
            if (nb1>=0 && nb1 <=20){
                input.style.borderColor = "green"
                document.getElementById('nb2Error').innerText = '✓';
                document.getElementById('nb2Error').style.color="green";
            } else{
                input.style.borderColor = "red"
                document.getElementById('nb2Error').innerText = 'Veuillez entrer un nombre  compris entre 0 et 20.';
                document.getElementById('nb2Error').style.color="red";
            }
    }
        function f6(){
            input=document.getElementById("coefficient")
            var nb1 = document.getElementById("coefficient").value;
            var coefPattern = /^\d+$/;
            if (!coefPattern.test(nb1)){
                input.style.borderColor = "red";
                document.getElementById('Coef').innerText = 'Veuillez entrer un nombre  .';
                document.getElementById('Coef').style.color="red";
            } else{
                input.style.borderColor = "green"
                document.getElementById('Coef').innerText = '✓';
                document.getElementById('Coef').style.color="green";
            }
    }
        function ajoute(){
            var nom = document.getElementById("nom").value;
            var email = document.getElementById('email').value;
            var matiere =document.getElementById("matiere").value;
            var nb1 = parseInt (document.getElementById("n1").value);
            var nb2 = parseInt(document.getElementById("n2").value);
            var coef = parseInt (document.getElementById("coefficient").value);
            var M= ((nb1+nb2)/coef);

            var table = document.getElementById("matable");
            var nouvelleLigne = document.createElement("tr");

            var c1 = document.createElement("td");
            var c2 = document.createElement("td");
            var c3 = document.createElement("td");
            var c4 = document.createElement("td");
            var c5 = document.createElement("td");
            var c6 = document.createElement("td");
            var c7 = document.createElement("td");

            c1.innerText = nom;
            c2.innerText = email;
            c3.innerText = matiere;
            c4.innerText = nb1;
            c5.innerText = nb2;
            c6.innerText = coef;
            c7.innerText = M;
            nouvelleLigne.appendChild(c1);
            nouvelleLigne.appendChild(c2);
            nouvelleLigne.appendChild(c3);
            nouvelleLigne.appendChild(c4);
            nouvelleLigne.appendChild(c5);
            nouvelleLigne.appendChild(c6);
            nouvelleLigne.appendChild(c7);

            table.appendChild(nouvelleLigne);

            document.getElementById("nom").value = "";
            document.getElementById("email").value = "";
            document.getElementById("matiere").value = "";
            document.getElementById("n1").value = "";
            document.getElementById("n2").value = "";
            document.getElementById("coefficient").value = "";
            // document.getElementById("c7").value = "";
        }
        // var formulaire = document.getElementById('Form');
        // function validation(){
        //     if (formulaire.checkValidity()){
        //     alert('Le formulaire a été soumis avec succès.');
        //     }
        // }
    </script>
</body>
</html>